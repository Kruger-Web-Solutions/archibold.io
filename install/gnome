#########################
# archibold.io (C) 2016 #
#########################

if [ "$(which sudo 2> /dev/null)" = "" ]; then
  bash <(curl -s https://archibold.io/install/sudo)
fi

if [ "$USE_WAYLAND" = "" ]; then
  echo "
  Would you like to disable Wayland ? [y/N]

Only if your drivers work best in legacy Xorg, type y
"
  read -n1 -s USE_WAYLAND
fi

source <(curl -s https://archibold.io/install/gpu)

echoWithHeader "
  Installing GNOME with GPU drivers:
  $GPU_DRIVERS
"

sudo pacman -S --needed --noconfirm \
    gnome \
    xf86-input-libinput \
    ttf-dejavu ttf-liberation ttf-freefont noto-fonts noto-fonts-emoji

# sudo pacman -S --needed --noconfirm \
#     gdm gnome-shell gnome-shell-extensions \
#     gnome-terminal gnome-control-center gnome-tweak-tool \
#     gnome-settings-daemon gnome-keyring gnome-disk-utility \
#     gnome-system-monitor gnome-backgrounds gnome-calculator \
#     gnome-screenshot gnome-photos evince \
#     networkmanager network-manager-applet polkit-gnome \
#     xdg-utils xdg-user-dirs-gtk xdg-desktop-portal-gtk \
#     eog totem \
#     xf86-input-libinput \
#     ttf-dejavu ttf-liberation ttf-freefont noto-fonts noto-fonts-emoji


if [ "$USE_WAYLAND" = "y" ] || [ "$USE_WAYLAND" = "Y" ]; then
  sudo sed -ie 's/#WaylandEnable=false/WaylandEnable=false/' /etc/gdm/custom.conf
fi

echoWithHeader "
  Enabling NetworkManager and GDM
"

sudo systemctl enable NetworkManager
sudo systemctl enable gdm
